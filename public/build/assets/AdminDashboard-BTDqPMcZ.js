import{r,k as M,o as B,b as l,h as n,d as k,u as F,w as P,F as g,a as _,Z as U,e as s,t as o,i as y,l as A,j as i,g as j,v as O}from"./app-UuDk6DcT.js";import{_ as T}from"./AuthenticatedLayout-CW4_WrNu.js";import"./ApplicationLogo-CDhRAOIs.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const L=s("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},"Dashboard",-1),Z={class:"py-12"},q={class:"max-w-7xl mx-auto sm:px-6 lg:px-8 space-y-10"},z={class:"bg-white shadow overflow-hidden sm:rounded-lg p-6"},G=s("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Overview Metrics",-1),H={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-6"},J={class:"bg-green-100 p-6 rounded-lg shadow text-center"},K=s("div",{class:"text-gray-600"},"Open Issues",-1),Q={class:"bg-orange-100 p-6 rounded-lg shadow text-center"},R=s("div",{class:"text-gray-600"},"Pending Issues",-1),W={key:0,class:"bg-white shadow overflow-hidden sm:rounded-lg p-6"},X=s("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"All Unassigned Issues",-1),Y={class:"space-y-4"},ss=s("br",null,null,-1),es=s("br",null,null,-1),ts={class:"mt-2"},os=s("label",{for:"priority",class:"block text-sm font-medium text-gray-700"},"Select Priority:",-1),as=["onUpdate:modelValue"],ls=["value"],ns=["onClick"],rs={class:"flex justify-between mt-4"},is=["disabled"],ds=["disabled"],cs={key:1,class:"bg-white shadow overflow-hidden sm:rounded-lg p-6"},us=s("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Assigned Issues",-1),gs={class:"space-y-4"},_s=s("strong",null,"Issue Name:",-1),hs=s("br",null,null,-1),ps=s("strong",null,"Issue Description:",-1),ms=s("br",null,null,-1),vs=s("strong",null,"System Name: ",-1),ys=s("br",null,null,-1),bs=s("strong",null,"Assigned To:",-1),fs=s("div",{class:"bg-white shadow overflow-hidden sm:rounded-lg p-6"},[s("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Search and Filters")],-1),C=5,As={__name:"AdminDashboard",setup(xs){const h=r(0),b=r(0),f=r([]),x=r([]),a=r(1),p=r(!1),m=r(!1),w=r([]),u=async()=>{try{const c=(await _.get(`/api/allissues?page=${a.value}&perPage=${C}`)).data.filter(e=>e.status_id===1);h.value=c.length,f.value=c,a.value===1&&I()}catch(t){console.error("Error fetching all issues:",t)}},D=async()=>{try{const t=await _.get("/api/priorities");w.value=t.data}catch(t){console.error("Error fetching priorities:",t)}},N=async()=>{try{const t=await _.get("/api/assignment");b.value=t.data.length,x.value=t.data}catch(t){console.error("Error fetching assigned issues:",t)}},S=async(t,c)=>{try{await _.put(`/api/issues/${t}/priority`,{priorityId:c}),u()}catch(e){console.error("Error setting priority:",e)}},v=M(()=>Math.ceil(h.value/C)),I=()=>{a.value<v.value&&(a.value++,u())},V=()=>{a.value>1&&(a.value--,u())},E=()=>{p.value=!p.value},$=()=>{m.value=!m.value};return B(()=>{u(),D(),N()}),(t,c)=>(l(),n(g,null,[k(F(U),{title:"Dashboard"}),k(T,null,{header:P(()=>[L]),default:P(()=>[s("div",Z,[s("div",q,[s("div",z,[G,s("div",H,[s("div",J,[s("div",{class:"text-3xl font-bold",onClick:E,style:{cursor:"pointer"}},o(h.value),1),K]),s("div",Q,[s("div",{class:"text-3xl font-bold",onClick:$,style:{cursor:"pointer"}},o(b.value),1),R])])]),p.value?(l(),n("div",W,[X,s("ul",Y,[(l(!0),n(g,null,y(f.value,e=>(l(),n("li",{key:e.id,class:"bg-gray-100 p-4 rounded-lg shadow"},[i(" Name: "+o(e.name)+" ",1),ss,i(" Description: "+o(e.description)+" ",1),es,i(" System: "+o(e.system_id)+" ",1),s("div",ts,[os,j(s("select",{"onUpdate:modelValue":d=>e.selectedPriority=d,id:"priority",name:"priority",class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md"},[(l(!0),n(g,null,y(w.value,d=>(l(),n("option",{key:d.id,value:d.id},o(d.name),9,ls))),128))],8,as),[[O,e.selectedPriority]]),s("button",{onClick:d=>S(e.id,e.selectedPriority),class:"mt-2 px-4 py-2 bg-indigo-500 text-white rounded-lg"},"Set",8,ns)])]))),128))]),s("div",rs,[s("button",{onClick:V,disabled:a.value===1,class:"px-4 py-2 bg-gray-200 rounded-lg cursor-pointer"},"Previous",8,is),s("span",null,"Page "+o(a.value)+" of "+o(v.value),1),s("button",{onClick:I,disabled:a.value===v.value,class:"px-4 py-2 bg-gray-200 rounded-lg cursor-pointer"},"Next",8,ds)])])):A("",!0),m.value?(l(),n("div",cs,[us,s("ul",gs,[(l(!0),n(g,null,y(x.value,e=>(l(),n("li",{key:e.issue_name,class:"bg-gray-100 p-4 rounded-lg shadow"},[_s,i(" "+o(e.issue_name)+" ",1),hs,ps,i(" "+o(e.issue_description)+" ",1),ms,vs,i(o(e.system_name)+" ",1),ys,bs,i(" "+o(e.assigned_user),1)]))),128))])])):A("",!0),fs])])]),_:1})],64))}};export{As as default};
